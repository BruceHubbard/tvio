<template name="category">
<div class="row">
    {{#if isEpisodic}}
      {{#each episodicGroups}}
        {{> episodicGroup}}
      {{/each}}
    {{else}}
      {{#each mediaFiles}}
        {{> mediaFile}}
      {{/each}}
    {{/if}}
</div>

</template>

<template name="mediaFile">
<div class="col-6 col-lg-3">
  <a href="#" class="pageslide-link"><img src="{{image}}" class="poster" /></a>
</div>
<div id="{{_id}}" class="col-5 pageslide">
  <a href="#" class="close-pageslide pull-left"><i class="icon-remove-circle"></i></a>
  <h3 class="media-file">{{name}}<i class='pull-right icon-edit edit-metadata'></i></h3>
  <button class="play-button btn btn-small"><i class="icon-{{icon}}"></i></button>
</div>
</template>

<template name="episodicGroup">
  <div class="col-6 col-lg-3">
    <a href="#" class="pageslide-link"><img src="{{image this}}" class="poster" /></a>
  </div>
  <div id="{{className this}}" class="col-5 pageslide">
    <a href="#" class="close-pageslide pull-left"><i class="icon-remove-circle"></i></a>
    <h3 class="episodic" data-name="{{this}}">{{this}} <i class='pull-right icon-edit edit-metadata'></i></h3>
    {{> metaData}}
    <table class="table table-condensed episode-list">
      <thead>
        <th></th>
        <th>Season</th>
        <th>Episode</th>
        <th>Progress</th>
      </thead>
      {{#each episodicGroupMediaFiles this}}
        {{> episodicGroupMediaFile}}
      {{/each}}
    </table>
  </div>
</template>

<template name="episodicGroupMediaFile">
  <tr class='media-file'>
    <td><button class="play-button btn btn-small"><i class="icon-{{icon}}"></i></button></td>
    <td>{{season}}</td>
    <td>{{episode}}</td>
    <td>
      {{#if viewed}}
        {{> progressBar}}
      {{/if}}
    </td>
  </tr>
</template>

<template name="progressBar">
{{#isolate}}
<div class="progress progress-striped {{progressClass}}" style="margin-bottom: 0px;">
  <div class="progress-bar" style="width: {{viewed_percentage}}%"></div>
</div>
{{/isolate}}
</template>
